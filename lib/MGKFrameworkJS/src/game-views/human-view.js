"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const game_core_js_1 = require("./../game/game-core.js");
class HumanView {
    constructor(name) {
        this.name = "HumanView";
        this.type = "HumanView";
        this.autoUpdate = false;
        this.reInit = true;
        this.requestShutdown = false;
        this.rendererName = "";
        this.isInitialized = false;
        this.clearColor = {
            r: 0.0,
            g: 0.0,
            b: 0.0,
            a: 0.0
        };
        this.name = name;
    }
    VInit() {
        let renderer = game_core_js_1.GameCore.game.comMan.GetByName(this.rendererName);
        renderer.CreateScene(function (scene, canvas) {
            let defaultCamera = new BABYLON.FreeCamera("camera_default", new BABYLON.Vector3(0, 5, -10), scene);
            defaultCamera.setTarget(BABYLON.Vector3.Zero());
            defaultCamera.attachControl(canvas, true);
            return scene;
        });
        this.isInitialized = true;
        this.reInit = false;
        return true;
    }
    VUpdate() {
        if (game_core_js_1.GameCore.game.Quitting() === true) {
            this.requestShutdown = true;
        }
        if (this.isInitialized === false) {
            console.warn("HumanView: VUpdate() -> The human view [" + this.name + "] called update without being initialized!\n" +
                "Call the VInit() function and ensure it returns true before calling VUpdate().");
            return;
        }
        let renderer = game_core_js_1.GameCore.game.comMan.GetByName(this.rendererName);
        if (renderer.IsInitialized === false) {
            console.warn("HumanView: VUpdate() -> The human view has detected that the renderer is not initialized!");
            return;
        }
        // Grab and clear the background color to start the scene rendering.
        let cc = this.clearColor;
        renderer.BeginScene(cc.r, cc.g, cc.b, cc.a);
        // Render objects here:
        // End rendering objects...
        // Call this to end the rendering scene and present it to the screen.
        renderer.EndScene();
    }
    VShutdown() {
        if (this.requestShutdown === true) {
            this.isInitialized = false;
            this.requestShutdown = false;
        }
    }
    VIsInitialized() {
        return this.isInitialized;
    }
    VReInit() {
        this.reInit = true;
    }
    VIsReInit() {
        return this.reInit;
    }
    VShutdownRequested() {
        return this.requestShutdown;
    }
    VRequestShutdown() {
        this.requestShutdown = true;
    }
    SetBackgroundColor(r, g, b, a) {
        this.clearColor.r = r;
        this.clearColor.g = g;
        this.clearColor.b = b;
        this.clearColor.a = a;
    }
    SetRendererName(name) {
        this.rendererName = name;
    }
}
exports.HumanView = HumanView;
function Create(name) {
    return new HumanView(name);
}
exports.Create = Create;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaHVtYW4tdmlldy5qcyIsInNvdXJjZVJvb3QiOiIuLy4uLyIsInNvdXJjZXMiOlsiTUdLRnJhbWV3b3JrSlMvc3JjL2dhbWUtdmlld3MvaHVtYW4tdmlldy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBLHlEQUFrRDtBQUVsRCxNQUFhLFNBQVM7SUFFbEIsWUFBWSxJQUFZO1FBeUZqQixTQUFJLEdBQVcsV0FBVyxDQUFDO1FBQzNCLFNBQUksR0FBVyxXQUFXLENBQUM7UUFDM0IsZUFBVSxHQUFZLEtBQUssQ0FBQztRQUM1QixXQUFNLEdBQVksSUFBSSxDQUFDO1FBQ3ZCLG9CQUFlLEdBQVksS0FBSyxDQUFDO1FBQ2hDLGlCQUFZLEdBQVcsRUFBRSxDQUFDO1FBQzFCLGtCQUFhLEdBQVksS0FBSyxDQUFDO1FBQy9CLGVBQVUsR0FBUTtZQUN0QixDQUFDLEVBQUUsR0FBRztZQUNOLENBQUMsRUFBRSxHQUFHO1lBQ04sQ0FBQyxFQUFFLEdBQUc7WUFDTixDQUFDLEVBQUUsR0FBRztTQUNULENBQUM7UUFwR0UsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7SUFDckIsQ0FBQztJQUVNLEtBQUs7UUFDUixJQUFJLFFBQVEsR0FBRyx1QkFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFXLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUUzRSxRQUFRLENBQUMsV0FBVyxDQUFDLFVBQVMsS0FBb0IsRUFBRSxNQUF5QjtZQUN6RSxJQUFJLGFBQWEsR0FBdUIsSUFBSSxPQUFPLENBQUMsVUFBVSxDQUFDLGdCQUFnQixFQUFFLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFFeEgsYUFBYSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7WUFDaEQsYUFBYSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFFMUMsT0FBTyxLQUFLLENBQUM7UUFDakIsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztRQUMxQixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNwQixPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRU0sT0FBTztRQUNWLElBQUksdUJBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ25DLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO1NBQy9CO1FBRUQsSUFBSSxJQUFJLENBQUMsYUFBYSxLQUFLLEtBQUssRUFBRTtZQUM5QixPQUFPLENBQUMsSUFBSSxDQUFDLDBDQUEwQyxHQUFHLElBQUksQ0FBQyxJQUFJLEdBQUcsOENBQThDO2dCQUNwSCxnRkFBZ0YsQ0FBQyxDQUFDO1lBQ2xGLE9BQU87U0FDVjtRQUVELElBQUksUUFBUSxHQUFHLHVCQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQVcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRTNFLElBQUksUUFBUSxDQUFDLGFBQWEsS0FBSyxLQUFLLEVBQUU7WUFDbEMsT0FBTyxDQUFDLElBQUksQ0FBQywyRkFBMkYsQ0FBQyxDQUFDO1lBQzFHLE9BQU87U0FDVjtRQUVELG9FQUFvRTtRQUNwRSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQ3pCLFFBQVEsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVDLHVCQUF1QjtRQUl2QiwyQkFBMkI7UUFDM0IscUVBQXFFO1FBQ3JFLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUN4QixDQUFDO0lBRU0sU0FBUztRQUNaLElBQUksSUFBSSxDQUFDLGVBQWUsS0FBSyxJQUFJLEVBQUU7WUFDL0IsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7WUFDM0IsSUFBSSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUM7U0FDaEM7SUFDTCxDQUFDO0lBRU0sY0FBYztRQUNqQixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDOUIsQ0FBQztJQUVNLE9BQU87UUFDVixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztJQUN2QixDQUFDO0lBRU0sU0FBUztRQUNaLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUN2QixDQUFDO0lBRU0sa0JBQWtCO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQztJQUNoQyxDQUFDO0lBRU0sZ0JBQWdCO1FBQ25CLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO0lBQ2hDLENBQUM7SUFFTSxrQkFBa0IsQ0FBQyxDQUFTLEVBQUUsQ0FBUyxFQUFFLENBQVMsRUFBRSxDQUFTO1FBQ2hFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN0QixJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBRU0sZUFBZSxDQUFDLElBQVk7UUFDL0IsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7SUFDN0IsQ0FBQztDQWVKO0FBeEdELDhCQXdHQztBQUVELFNBQWdCLE1BQU0sQ0FBQyxJQUFZO0lBQy9CLE9BQU8sSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDL0IsQ0FBQztBQUZELHdCQUVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSUdhbWVWaWV3IH0gZnJvbSBcIi4vLi4vZ2FtZS12aWV3LWludGVyZmFjZS5qc1wiO1xyXG5pbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gXCIuLy4uL2NvbXBvbmVudHMvcmVuZGVyZXIuanNcIjtcclxuaW1wb3J0IHsgR2FtZUNvcmUgfSBmcm9tIFwiLi8uLi9nYW1lL2dhbWUtY29yZS5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEh1bWFuVmlldyBpbXBsZW1lbnRzIElHYW1lVmlldyB7XHJcblxyXG4gICAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgVkluaXQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IHJlbmRlcmVyID0gR2FtZUNvcmUuZ2FtZS5jb21NYW4uR2V0QnlOYW1lPFJlbmRlcmVyPih0aGlzLnJlbmRlcmVyTmFtZSk7XHJcblxyXG4gICAgICAgIHJlbmRlcmVyLkNyZWF0ZVNjZW5lKGZ1bmN0aW9uKHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KTogQkFCWUxPTi5TY2VuZSB7XHJcbiAgICAgICAgICAgIGxldCBkZWZhdWx0Q2FtZXJhOiBCQUJZTE9OLkZyZWVDYW1lcmEgPSBuZXcgQkFCWUxPTi5GcmVlQ2FtZXJhKFwiY2FtZXJhX2RlZmF1bHRcIiwgbmV3IEJBQllMT04uVmVjdG9yMygwLCA1LCAtMTApLCBzY2VuZSk7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0Q2FtZXJhLnNldFRhcmdldChCQUJZTE9OLlZlY3RvcjMuWmVybygpKTtcclxuICAgICAgICAgICAgZGVmYXVsdENhbWVyYS5hdHRhY2hDb250cm9sKGNhbnZhcywgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2NlbmU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZUluaXQgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgVlVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAoR2FtZUNvcmUuZ2FtZS5RdWl0dGluZygpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFNodXRkb3duID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkh1bWFuVmlldzogVlVwZGF0ZSgpIC0+IFRoZSBodW1hbiB2aWV3IFtcIiArIHRoaXMubmFtZSArIFwiXSBjYWxsZWQgdXBkYXRlIHdpdGhvdXQgYmVpbmcgaW5pdGlhbGl6ZWQhXFxuXCIgK1xyXG4gICAgICAgICAgICBcIkNhbGwgdGhlIFZJbml0KCkgZnVuY3Rpb24gYW5kIGVuc3VyZSBpdCByZXR1cm5zIHRydWUgYmVmb3JlIGNhbGxpbmcgVlVwZGF0ZSgpLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHJlbmRlcmVyID0gR2FtZUNvcmUuZ2FtZS5jb21NYW4uR2V0QnlOYW1lPFJlbmRlcmVyPih0aGlzLnJlbmRlcmVyTmFtZSk7XHJcblxyXG4gICAgICAgIGlmIChyZW5kZXJlci5Jc0luaXRpYWxpemVkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJIdW1hblZpZXc6IFZVcGRhdGUoKSAtPiBUaGUgaHVtYW4gdmlldyBoYXMgZGV0ZWN0ZWQgdGhhdCB0aGUgcmVuZGVyZXIgaXMgbm90IGluaXRpYWxpemVkIVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR3JhYiBhbmQgY2xlYXIgdGhlIGJhY2tncm91bmQgY29sb3IgdG8gc3RhcnQgdGhlIHNjZW5lIHJlbmRlcmluZy5cclxuICAgICAgICBsZXQgY2MgPSB0aGlzLmNsZWFyQ29sb3I7XHJcbiAgICAgICAgcmVuZGVyZXIuQmVnaW5TY2VuZShjYy5yLCBjYy5nLCBjYy5iLCBjYy5hKTtcclxuICAgICAgICAvLyBSZW5kZXIgb2JqZWN0cyBoZXJlOlxyXG5cclxuXHJcblxyXG4gICAgICAgIC8vIEVuZCByZW5kZXJpbmcgb2JqZWN0cy4uLlxyXG4gICAgICAgIC8vIENhbGwgdGhpcyB0byBlbmQgdGhlIHJlbmRlcmluZyBzY2VuZSBhbmQgcHJlc2VudCBpdCB0byB0aGUgc2NyZWVuLlxyXG4gICAgICAgIHJlbmRlcmVyLkVuZFNjZW5lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIFZTaHV0ZG93bigpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5yZXF1ZXN0U2h1dGRvd24gPT09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFNodXRkb3duID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBWSXNJbml0aWFsaXplZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0luaXRpYWxpemVkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBWUmVJbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmVJbml0ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgVklzUmVJbml0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlSW5pdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgVlNodXRkb3duUmVxdWVzdGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RTaHV0ZG93bjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgVlJlcXVlc3RTaHV0ZG93bigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJlcXVlc3RTaHV0ZG93biA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIFNldEJhY2tncm91bmRDb2xvcihyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNsZWFyQ29sb3IuciA9IHI7XHJcbiAgICAgICAgdGhpcy5jbGVhckNvbG9yLmcgPSBnO1xyXG4gICAgICAgIHRoaXMuY2xlYXJDb2xvci5iID0gYjtcclxuICAgICAgICB0aGlzLmNsZWFyQ29sb3IuYSA9IGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIFNldFJlbmRlcmVyTmFtZShuYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyTmFtZSA9IG5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZyA9IFwiSHVtYW5WaWV3XCI7XHJcbiAgICBwdWJsaWMgdHlwZTogc3RyaW5nID0gXCJIdW1hblZpZXdcIjtcclxuICAgIHB1YmxpYyBhdXRvVXBkYXRlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgcmVJbml0OiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHB1YmxpYyByZXF1ZXN0U2h1dGRvd246IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgcmVuZGVyZXJOYW1lOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgcHJpdmF0ZSBpc0luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGNsZWFyQ29sb3I6IGFueSA9IHtcclxuICAgICAgICByOiAwLjAsXHJcbiAgICAgICAgZzogMC4wLFxyXG4gICAgICAgIGI6IDAuMCxcclxuICAgICAgICBhOiAwLjBcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGUobmFtZTogc3RyaW5nKTogSHVtYW5WaWV3IHtcclxuICAgIHJldHVybiBuZXcgSHVtYW5WaWV3KG5hbWUpO1xyXG59XHJcbiJdfQ==